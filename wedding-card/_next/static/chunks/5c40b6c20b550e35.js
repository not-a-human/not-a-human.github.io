(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76087,e=>{e.v({actionButton:"admin-module__aXBbkG__actionButton",active:"admin-module__aXBbkG__active",adminContainer:"admin-module__aXBbkG__adminContainer",dashboardContainer:"admin-module__aXBbkG__dashboardContainer",dashboardHeader:"admin-module__aXBbkG__dashboardHeader",dashboardTitle:"admin-module__aXBbkG__dashboardTitle",dataTable:"admin-module__aXBbkG__dataTable",deleteButton:"admin-module__aXBbkG__deleteButton",editButton:"admin-module__aXBbkG__editButton",emptyState:"admin-module__aXBbkG__emptyState",emptyStateIcon:"admin-module__aXBbkG__emptyStateIcon",errorMessage:"admin-module__aXBbkG__errorMessage",filterSelect:"admin-module__aXBbkG__filterSelect",inputField:"admin-module__aXBbkG__inputField",inputGroup:"admin-module__aXBbkG__inputGroup",inputLabel:"admin-module__aXBbkG__inputLabel",loadingContainer:"admin-module__aXBbkG__loadingContainer",loginButton:"admin-module__aXBbkG__loginButton",loginCard:"admin-module__aXBbkG__loginCard",loginContainer:"admin-module__aXBbkG__loginContainer",loginForm:"admin-module__aXBbkG__loginForm",loginTitle:"admin-module__aXBbkG__loginTitle",logoutButton:"admin-module__aXBbkG__logoutButton",searchContainer:"admin-module__aXBbkG__searchContainer",searchInput:"admin-module__aXBbkG__searchInput",spin:"admin-module__aXBbkG__spin",spinner:"admin-module__aXBbkG__spinner",statCard:"admin-module__aXBbkG__statCard",statLabel:"admin-module__aXBbkG__statLabel",statNumber:"admin-module__aXBbkG__statNumber",statsContainer:"admin-module__aXBbkG__statsContainer",tabButton:"admin-module__aXBbkG__tabButton",tabContent:"admin-module__aXBbkG__tabContent",tabHeader:"admin-module__aXBbkG__tabHeader",tableContainer:"admin-module__aXBbkG__tableContainer",tabsContainer:"admin-module__aXBbkG__tabsContainer"})},23261,e=>{"use strict";e.s(["default",()=>f],23261);var t=e.i(43476),a=e.i(71645),n=e.i(76087);e.i(47167);var l=e.i(11152);let d=()=>a.default.createElement(l.FaLock),s=()=>a.default.createElement(l.FaUser),o={username:"admin",password:"145837"};function r(e){let{onSuccess:l}=e,[r,i]=(0,a.useState)({username:"",password:""}),[c,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(""),_=e=>{let{name:t,value:a}=e.target;i(e=>({...e,[t]:a})),m&&h("")},b=async e=>{if(e.preventDefault(),u(!0),h(""),await new Promise(e=>setTimeout(e,1e3)),r.username===o.username&&r.password===o.password){let e=new Date().getTime()+864e5;localStorage.setItem("admin-token","authenticated"),localStorage.setItem("admin-token-expiry",e.toString()),l()}else h("Invalid username or password");u(!1)};return(0,t.jsx)("div",{className:n.default.loginContainer,children:(0,t.jsxs)("div",{className:n.default.loginCard,children:[(0,t.jsxs)("h1",{className:n.default.loginTitle,children:[(0,t.jsx)(d,{})," Admin Dashboard"]}),(0,t.jsxs)("form",{onSubmit:b,className:n.default.loginForm,children:[m&&(0,t.jsx)("div",{className:n.default.errorMessage,children:m}),(0,t.jsxs)("div",{className:n.default.inputGroup,children:[(0,t.jsxs)("label",{htmlFor:"username",className:n.default.inputLabel,children:[(0,t.jsx)(s,{})," Username"]}),(0,t.jsx)("input",{type:"text",id:"username",name:"username",value:r.username,onChange:_,className:n.default.inputField,placeholder:"Enter admin username",required:!0})]}),(0,t.jsxs)("div",{className:n.default.inputGroup,children:[(0,t.jsxs)("label",{htmlFor:"password",className:n.default.inputLabel,children:[(0,t.jsx)(d,{})," Password"]}),(0,t.jsx)("input",{type:"password",id:"password",name:"password",value:r.password,onChange:_,className:n.default.inputField,placeholder:"Enter admin password",required:!0})]}),(0,t.jsx)("button",{type:"submit",className:n.default.loginButton,disabled:c,children:c?"Authenticating...":"Login"})]})]})})}var i=e.i(57448);let c=(0,a.createContext)(void 0);function u(e){let{children:t}=e;return a.default.createElement(c.Provider,{value:{refreshData:()=>{window.dispatchEvent(new CustomEvent("admin-refresh"))}}},t)}let m=()=>a.default.createElement(l.FaSignOutAlt),h=()=>a.default.createElement(l.FaUsers),_=()=>a.default.createElement(l.FaComments),b=()=>a.default.createElement(l.FaTrash);function g(e){let{onLogout:l}=e,[d,s]=(0,a.useState)("rsvp"),[o,r]=(0,a.useState)([]),[u,g]=(0,a.useState)([]),[f,x]=(0,a.useState)(!0),[j,p]=(0,a.useState)(""),[v,k]=(0,a.useState)(""),N=(0,i.createDatabaseClient)(),{refreshData:C}=function(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}();(0,a.useEffect)(()=>{B();let e=()=>B();return window.addEventListener("admin-refresh",e),()=>window.removeEventListener("admin-refresh",e)},[]);let B=async()=>{x(!0),console.log("ðŸ”„ Loading admin data...");try{var e,t;console.log("ðŸ“ž Fetching RSVP data...");let a=await N.getAll("rsvp",{limit:1e3});console.log("ðŸ“Š RSVP Result:",{data:a.data,error:a.error,provider:a.provider,dataLength:(null==(e=a.data)?void 0:e.length)||0}),a.data&&!a.error?(r(a.data),console.log("âœ… RSVP data loaded:",a.data.length,"entries"),a.data.length>0&&(console.log("ðŸ” RSVP sample record fields:",Object.keys(a.data[0])),console.log("ðŸ” RSVP sample record:",a.data[0]))):(console.log("âŒ RSVP data error:",a.error),r([])),console.log("ðŸ’¬ Fetching Guestbook data...");let n=await N.getAll("guestbook",{limit:1e3});console.log("ðŸ“Š Guestbook Result:",{data:n.data,error:n.error,provider:n.provider,dataLength:(null==(t=n.data)?void 0:t.length)||0}),n.data&&!n.error?(g(n.data),console.log("âœ… Guestbook data loaded:",n.data.length,"entries"),n.data.length>0&&(console.log("ðŸ” Guestbook sample record fields:",Object.keys(n.data[0])),console.log("ðŸ” Guestbook sample record:",n.data[0]))):(console.log("âŒ Guestbook data error:",n.error),g([]))}catch(e){console.error("ðŸ’¥ Failed to load admin data:",e),r([]),g([])}x(!1),console.log("ðŸ Admin data loading complete")},G=async e=>{if(confirm("Are you sure you want to delete this RSVP?"))try{(await N.delete("rsvp",e)).error?alert("Failed to delete RSVP"):r(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Delete failed:",e),alert("Failed to delete RSVP")}},S=async e=>{if(confirm("Are you sure you want to delete this guestbook entry?"))try{(await N.delete("guestbook",e)).error?alert("Failed to delete guestbook entry"):g(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Delete failed:",e),alert("Failed to delete guestbook entry")}},w=o.filter(e=>{let t=e.name.toLowerCase().includes(j.toLowerCase())||e.tel.includes(j),a=!v||e.attendance===v;return t&&a}),y=u.filter(e=>e.name.toLowerCase().includes(j.toLowerCase())||e.message.toLowerCase().includes(j.toLowerCase())),X={totalRSVPs:o.length,attending:o.filter(e=>"yes"===e.attendance).length,notAttending:o.filter(e=>"no"===e.attendance).length,totalGuests:o.reduce((e,t)=>e+(t.numberOfGuests||0),0),guestbookEntries:u.length};return f?(0,t.jsxs)("div",{className:n.default.loadingContainer,children:[(0,t.jsx)("div",{className:n.default.spinner}),(0,t.jsx)("p",{children:"Loading dashboard data..."})]}):(0,t.jsxs)("div",{className:n.default.dashboardContainer,children:[(0,t.jsxs)("div",{className:n.default.dashboardHeader,children:[(0,t.jsx)("h1",{className:n.default.dashboardTitle,children:"Wedding Admin Dashboard"}),(0,t.jsxs)("button",{onClick:()=>{localStorage.removeItem("admin-token"),localStorage.removeItem("admin-token-expiry"),l()},className:n.default.logoutButton,children:[(0,t.jsx)(m,{})," Logout"]})]}),(0,t.jsxs)("div",{className:n.default.statsContainer,children:[(0,t.jsxs)("div",{className:n.default.statCard,children:[(0,t.jsx)("div",{className:n.default.statNumber,children:X.totalRSVPs}),(0,t.jsx)("div",{className:n.default.statLabel,children:"Total RSVPs"})]}),(0,t.jsxs)("div",{className:n.default.statCard,children:[(0,t.jsx)("div",{className:n.default.statNumber,children:X.attending}),(0,t.jsx)("div",{className:n.default.statLabel,children:"Attending"})]}),(0,t.jsxs)("div",{className:n.default.statCard,children:[(0,t.jsx)("div",{className:n.default.statNumber,children:X.notAttending}),(0,t.jsx)("div",{className:n.default.statLabel,children:"Not Attending"})]}),(0,t.jsxs)("div",{className:n.default.statCard,children:[(0,t.jsx)("div",{className:n.default.statNumber,children:X.totalGuests}),(0,t.jsx)("div",{className:n.default.statLabel,children:"Total Guests"})]}),(0,t.jsxs)("div",{className:n.default.statCard,children:[(0,t.jsx)("div",{className:n.default.statNumber,children:X.guestbookEntries}),(0,t.jsx)("div",{className:n.default.statLabel,children:"Guestbook Entries"})]})]}),(0,t.jsxs)("div",{className:n.default.tabsContainer,children:[(0,t.jsxs)("div",{className:n.default.tabHeader,children:[(0,t.jsxs)("button",{className:"".concat(n.default.tabButton," ").concat("rsvp"===d?n.default.active:""),onClick:()=>s("rsvp"),children:[(0,t.jsx)(h,{})," RSVP Management (",X.totalRSVPs,")"]}),(0,t.jsxs)("button",{className:"".concat(n.default.tabButton," ").concat("guestbook"===d?n.default.active:""),onClick:()=>s("guestbook"),children:[(0,t.jsx)(_,{})," Guestbook Management (",X.guestbookEntries,")"]})]}),(0,t.jsxs)("div",{className:n.default.tabContent,children:[(0,t.jsxs)("div",{className:n.default.searchContainer,children:[(0,t.jsx)("input",{type:"text",placeholder:"Search...",value:j,onChange:e=>p(e.target.value),className:n.default.searchInput}),"rsvp"===d&&(0,t.jsxs)("select",{value:v,onChange:e=>k(e.target.value),className:n.default.filterSelect,children:[(0,t.jsx)("option",{value:"",children:"All Attendance"}),(0,t.jsx)("option",{value:"yes",children:"Attending"}),(0,t.jsx)("option",{value:"no",children:"Not Attending"})]})]}),"rsvp"===d&&(0,t.jsx)("div",{className:n.default.tableContainer,children:0===w.length?(0,t.jsxs)("div",{className:n.default.emptyState,children:[(0,t.jsx)("div",{className:n.default.emptyStateIcon,children:(0,t.jsx)(h,{})}),(0,t.jsx)("p",{children:"No RSVP entries found"})]}):(0,t.jsxs)("table",{className:n.default.dataTable,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Phone"}),(0,t.jsx)("th",{children:"Attendance"}),(0,t.jsx)("th",{children:"Guests"}),(0,t.jsx)("th",{children:"Date"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:w.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.name}),(0,t.jsx)("td",{children:e.tel}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{style:{color:"yes"===e.attendance?"#4CAF50":"#f44336",fontWeight:"bold"},children:"yes"===e.attendance?"âœ“ Attending":"âœ— Not Attending"})}),(0,t.jsx)("td",{children:e.numberOfGuests||0}),(0,t.jsx)("td",{children:(()=>{let t=e.created_at||e.createdTime||e.createdAt||e.timestamp;return t?new Date(t).toLocaleDateString():"N/A"})()}),(0,t.jsx)("td",{children:(0,t.jsx)("button",{onClick:()=>G(e.id),className:"".concat(n.default.actionButton," ").concat(n.default.deleteButton),children:(0,t.jsx)(b,{})})})]},e.id))})]})}),"guestbook"===d&&(0,t.jsx)("div",{className:n.default.tableContainer,children:0===y.length?(0,t.jsxs)("div",{className:n.default.emptyState,children:[(0,t.jsx)("div",{className:n.default.emptyStateIcon,children:(0,t.jsx)(_,{})}),(0,t.jsx)("p",{children:"No guestbook entries found"})]}):(0,t.jsxs)("table",{className:n.default.dataTable,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Message"}),(0,t.jsx)("th",{children:"Date"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:y.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.name}),(0,t.jsx)("td",{children:(0,t.jsx)("div",{style:{maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis"},children:e.desc})}),(0,t.jsx)("td",{children:(()=>{let t=e.created_at||e.createdTime||e.createdAt||e.timestamp;return t?new Date(t).toLocaleDateString():"N/A"})()}),(0,t.jsx)("td",{children:(0,t.jsx)("button",{onClick:()=>S(e.id),className:"".concat(n.default.actionButton," ").concat(n.default.deleteButton),children:(0,t.jsx)(b,{})})})]},e.id))})]})})]})]})]})}function f(){let[e,l]=(0,a.useState)(!1),[d,s]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=localStorage.getItem("admin-token"),t=localStorage.getItem("admin-token-expiry");e&&t&&(new Date().getTime()<parseInt(t)?l(!0):(localStorage.removeItem("admin-token"),localStorage.removeItem("admin-token-expiry"))),s(!1)},[]),d)?(0,t.jsxs)("div",{className:n.default.loadingContainer,children:[(0,t.jsx)("div",{className:n.default.spinner}),(0,t.jsx)("p",{children:"Loading admin panel..."})]}):a.default.createElement(u,{children:a.default.createElement("div",{className:n.default.adminContainer},e?a.default.createElement(g,{onLogout:()=>l(!1)}):a.default.createElement(r,{onSuccess:()=>l(!0)}))})}}]);