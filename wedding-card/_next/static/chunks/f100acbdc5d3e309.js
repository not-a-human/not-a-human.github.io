(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76087,e=>{e.v({actionButton:"admin-module__aXBbkG__actionButton",active:"admin-module__aXBbkG__active",adminContainer:"admin-module__aXBbkG__adminContainer",dashboardContainer:"admin-module__aXBbkG__dashboardContainer",dashboardHeader:"admin-module__aXBbkG__dashboardHeader",dashboardTitle:"admin-module__aXBbkG__dashboardTitle",dataTable:"admin-module__aXBbkG__dataTable",deleteButton:"admin-module__aXBbkG__deleteButton",editButton:"admin-module__aXBbkG__editButton",emptyState:"admin-module__aXBbkG__emptyState",emptyStateIcon:"admin-module__aXBbkG__emptyStateIcon",errorMessage:"admin-module__aXBbkG__errorMessage",filterSelect:"admin-module__aXBbkG__filterSelect",inputField:"admin-module__aXBbkG__inputField",inputGroup:"admin-module__aXBbkG__inputGroup",inputLabel:"admin-module__aXBbkG__inputLabel",loadingContainer:"admin-module__aXBbkG__loadingContainer",loginButton:"admin-module__aXBbkG__loginButton",loginCard:"admin-module__aXBbkG__loginCard",loginContainer:"admin-module__aXBbkG__loginContainer",loginForm:"admin-module__aXBbkG__loginForm",loginTitle:"admin-module__aXBbkG__loginTitle",logoutButton:"admin-module__aXBbkG__logoutButton",searchContainer:"admin-module__aXBbkG__searchContainer",searchInput:"admin-module__aXBbkG__searchInput",spin:"admin-module__aXBbkG__spin",spinner:"admin-module__aXBbkG__spinner",statCard:"admin-module__aXBbkG__statCard",statLabel:"admin-module__aXBbkG__statLabel",statNumber:"admin-module__aXBbkG__statNumber",statsContainer:"admin-module__aXBbkG__statsContainer",tabButton:"admin-module__aXBbkG__tabButton",tabContent:"admin-module__aXBbkG__tabContent",tabHeader:"admin-module__aXBbkG__tabHeader",tableContainer:"admin-module__aXBbkG__tableContainer",tabsContainer:"admin-module__aXBbkG__tabsContainer"})},23261,e=>{"use strict";e.s(["default",()=>x],23261);var t=e.i(43476),a=e.i(71645),n=e.i(76087);e.i(47167);var d=e.i(11152),l=e.i(18566);let s=()=>a.default.createElement(d.FaLock),o=()=>a.default.createElement(d.FaUser);function r(e){let{onSuccess:d}=e,r=(0,l.usePathname)().includes("/demo"),i={username:"admin",password:r?"1234":"145837"},[c,u]=(0,a.useState)({username:"",password:""}),[m,h]=(0,a.useState)(!1),[_,b]=(0,a.useState)(""),g=e=>{let{name:t,value:a}=e.target;u(e=>({...e,[t]:a})),_&&b("")},x=async e=>{if(e.preventDefault(),h(!0),b(""),await new Promise(e=>setTimeout(e,1e3)),c.username===i.username&&c.password===i.password){let e=new Date().getTime()+864e5;localStorage.setItem("admin-token","authenticated"),localStorage.setItem("admin-token-expiry",e.toString()),d()}else b("Invalid username or password");h(!1)};return(0,t.jsx)("div",{className:n.default.loginContainer,children:(0,t.jsxs)("div",{className:n.default.loginCard,children:[(0,t.jsxs)("h1",{className:n.default.loginTitle,children:[(0,t.jsx)(s,{})," Admin Dashboard"]}),(0,t.jsxs)("form",{onSubmit:x,className:n.default.loginForm,children:[_&&(0,t.jsx)("div",{className:n.default.errorMessage,children:_}),(0,t.jsxs)("div",{className:n.default.inputGroup,children:[(0,t.jsxs)("label",{htmlFor:"username",className:n.default.inputLabel,children:[(0,t.jsx)(o,{})," Username"]}),(0,t.jsx)("input",{type:"text",id:"username",name:"username",value:c.username,onChange:g,className:n.default.inputField,placeholder:"Enter admin username",required:!0})]}),(0,t.jsxs)("div",{className:n.default.inputGroup,children:[(0,t.jsxs)("label",{htmlFor:"password",className:n.default.inputLabel,children:[(0,t.jsx)(s,{})," Password"]}),(0,t.jsx)("input",{type:"password",id:"password",name:"password",value:c.password,onChange:g,className:n.default.inputField,placeholder:"Enter admin password",required:!0})]}),(0,t.jsx)("button",{type:"submit",className:n.default.loginButton,disabled:m,children:m?"Authenticating...":"Login"})]}),r&&(0,t.jsxs)("div",{style:{marginTop:"2rem",fontSize:"0.8rem",color:"rgba(255,255,255,0.6)",textAlign:"center"},children:["Demo Credentials:",(0,t.jsx)("br",{}),"Username: ",(0,t.jsx)("strong",{children:"admin"}),(0,t.jsx)("br",{}),"Password: ",(0,t.jsx)("strong",{children:"1234"})]})]})})}var i=e.i(57448);let c=(0,a.createContext)(void 0);function u(e){let{children:t}=e;return a.default.createElement(c.Provider,{value:{refreshData:()=>{window.dispatchEvent(new CustomEvent("admin-refresh"))}}},t)}let m=()=>a.default.createElement(d.FaSignOutAlt),h=()=>a.default.createElement(d.FaUsers),_=()=>a.default.createElement(d.FaComments),b=()=>a.default.createElement(d.FaTrash);function g(e){let{onLogout:d}=e,[s,o]=(0,a.useState)("rsvp"),[r,u]=(0,a.useState)([]),[g,x]=(0,a.useState)([]),[f,j]=(0,a.useState)(!0),[p,v]=(0,a.useState)(""),[k,N]=(0,a.useState)(""),C=(0,i.createDatabaseClient)(),{refreshData:B}=function(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}(),G=(0,l.usePathname)(),S=G.includes("/demo")?"rsvpdemo":"rsvp",w=G.includes("/demo")?"guestbookdemo":"guestbook";(0,a.useEffect)(()=>{y();let e=()=>y();return window.addEventListener("admin-refresh",e),()=>window.removeEventListener("admin-refresh",e)},[]);let y=async()=>{j(!0),console.log("🔄 Loading admin data...");try{var e,t;console.log("📞 Fetching RSVP data...");let a=await C.getAll(S,{limit:1e3});console.log("📊 RSVP Result:",{data:a.data,error:a.error,provider:a.provider,dataLength:(null==(e=a.data)?void 0:e.length)||0}),a.data&&!a.error?(u(a.data),console.log("✅ RSVP data loaded:",a.data.length,"entries"),a.data.length>0&&(console.log("🔍 RSVP sample record fields:",Object.keys(a.data[0])),console.log("🔍 RSVP sample record:",a.data[0]))):(console.log("❌ RSVP data error:",a.error),u([])),console.log("💬 Fetching Guestbook data...");let n=await C.getAll(w,{limit:1e3});console.log("📊 Guestbook Result:",{data:n.data,error:n.error,provider:n.provider,dataLength:(null==(t=n.data)?void 0:t.length)||0}),n.data&&!n.error?(x(n.data),console.log("✅ Guestbook data loaded:",n.data.length,"entries"),n.data.length>0&&(console.log("🔍 Guestbook sample record fields:",Object.keys(n.data[0])),console.log("🔍 Guestbook sample record:",n.data[0]))):(console.log("❌ Guestbook data error:",n.error),x([]))}catch(e){console.error("💥 Failed to load admin data:",e),u([]),x([])}j(!1),console.log("🏁 Admin data loading complete")},X=async e=>{if(confirm("Are you sure you want to delete this RSVP?"))try{(await C.delete(S,e)).error?alert("Failed to delete RSVP"):u(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Delete failed:",e),alert("Failed to delete RSVP")}},A=async e=>{if(confirm("Are you sure you want to delete this guestbook entry?"))try{(await C.delete(w,e)).error?alert("Failed to delete guestbook entry"):x(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Delete failed:",e),alert("Failed to delete guestbook entry")}},L=r.filter(e=>{let t=e.name.toLowerCase().includes(p.toLowerCase())||e.tel.includes(p),a=!k||e.attendance===k;return t&&a}),P=g.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())||e.message.toLowerCase().includes(p.toLowerCase())),E={totalRSVPs:r.length,attending:r.filter(e=>"yes"===e.attendance).length,notAttending:r.filter(e=>"no"===e.attendance).length,totalGuests:r.reduce((e,t)=>e+(t.numberOfGuests||0),0),guestbookEntries:g.length};return f?(0,t.jsxs)("div",{className:n.default.loadingContainer,children:[(0,t.jsx)("div",{className:n.default.spinner}),(0,t.jsx)("p",{children:"Loading dashboard data..."})]}):(0,t.jsxs)("div",{className:n.default.dashboardContainer,children:[(0,t.jsxs)("div",{className:n.default.dashboardHeader,children:[(0,t.jsx)("h1",{className:n.default.dashboardTitle,children:"Wedding Admin Dashboard"}),(0,t.jsxs)("button",{onClick:()=>{localStorage.removeItem("admin-token"),localStorage.removeItem("admin-token-expiry"),d()},className:n.default.logoutButton,children:[(0,t.jsx)(m,{})," Logout"]})]}),(0,t.jsxs)("div",{className:n.default.statsContainer,children:[(0,t.jsxs)("div",{className:n.default.statCard,children:[(0,t.jsx)("div",{className:n.default.statNumber,children:E.totalRSVPs}),(0,t.jsx)("div",{className:n.default.statLabel,children:"Total RSVPs"})]}),(0,t.jsxs)("div",{className:n.default.statCard,children:[(0,t.jsx)("div",{className:n.default.statNumber,children:E.attending}),(0,t.jsx)("div",{className:n.default.statLabel,children:"Attending"})]}),(0,t.jsxs)("div",{className:n.default.statCard,children:[(0,t.jsx)("div",{className:n.default.statNumber,children:E.notAttending}),(0,t.jsx)("div",{className:n.default.statLabel,children:"Not Attending"})]}),(0,t.jsxs)("div",{className:n.default.statCard,children:[(0,t.jsx)("div",{className:n.default.statNumber,children:E.totalGuests}),(0,t.jsx)("div",{className:n.default.statLabel,children:"Total Guests"})]}),(0,t.jsxs)("div",{className:n.default.statCard,children:[(0,t.jsx)("div",{className:n.default.statNumber,children:E.guestbookEntries}),(0,t.jsx)("div",{className:n.default.statLabel,children:"Guestbook Entries"})]})]}),(0,t.jsxs)("div",{className:n.default.tabsContainer,children:[(0,t.jsxs)("div",{className:n.default.tabHeader,children:[(0,t.jsxs)("button",{className:"".concat(n.default.tabButton," ").concat("rsvp"===s?n.default.active:""),onClick:()=>o("rsvp"),children:[(0,t.jsx)(h,{})," RSVP Management (",E.totalRSVPs,")"]}),(0,t.jsxs)("button",{className:"".concat(n.default.tabButton," ").concat("guestbook"===s?n.default.active:""),onClick:()=>o("guestbook"),children:[(0,t.jsx)(_,{})," Guestbook Management (",E.guestbookEntries,")"]})]}),(0,t.jsxs)("div",{className:n.default.tabContent,children:[(0,t.jsxs)("div",{className:n.default.searchContainer,children:[(0,t.jsx)("input",{type:"text",placeholder:"Search...",value:p,onChange:e=>v(e.target.value),className:n.default.searchInput}),"rsvp"===s&&(0,t.jsxs)("select",{value:k,onChange:e=>N(e.target.value),className:n.default.filterSelect,children:[(0,t.jsx)("option",{value:"",children:"All Attendance"}),(0,t.jsx)("option",{value:"yes",children:"Attending"}),(0,t.jsx)("option",{value:"no",children:"Not Attending"})]})]}),"rsvp"===s&&(0,t.jsx)("div",{className:n.default.tableContainer,children:0===L.length?(0,t.jsxs)("div",{className:n.default.emptyState,children:[(0,t.jsx)("div",{className:n.default.emptyStateIcon,children:(0,t.jsx)(h,{})}),(0,t.jsx)("p",{children:"No RSVP entries found"})]}):(0,t.jsxs)("table",{className:n.default.dataTable,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Phone"}),(0,t.jsx)("th",{children:"Attendance"}),(0,t.jsx)("th",{children:"Guests"}),(0,t.jsx)("th",{children:"Date"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:L.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.name}),(0,t.jsx)("td",{children:e.tel}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{style:{color:"yes"===e.attendance?"#4CAF50":"#f44336",fontWeight:"bold"},children:"yes"===e.attendance?"✓ Attending":"✗ Not Attending"})}),(0,t.jsx)("td",{children:e.numberOfGuests||0}),(0,t.jsx)("td",{children:(()=>{let t=e.created_at||e.createdTime||e.createdAt||e.timestamp;return t?new Date(t).toLocaleDateString():"N/A"})()}),(0,t.jsx)("td",{children:(0,t.jsx)("button",{onClick:()=>X(e.id),className:"".concat(n.default.actionButton," ").concat(n.default.deleteButton),children:(0,t.jsx)(b,{})})})]},e.id))})]})}),"guestbook"===s&&(0,t.jsx)("div",{className:n.default.tableContainer,children:0===P.length?(0,t.jsxs)("div",{className:n.default.emptyState,children:[(0,t.jsx)("div",{className:n.default.emptyStateIcon,children:(0,t.jsx)(_,{})}),(0,t.jsx)("p",{children:"No guestbook entries found"})]}):(0,t.jsxs)("table",{className:n.default.dataTable,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Message"}),(0,t.jsx)("th",{children:"Date"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:P.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.name}),(0,t.jsx)("td",{children:(0,t.jsx)("div",{style:{maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis"},children:e.desc})}),(0,t.jsx)("td",{children:(()=>{let t=e.created_at||e.createdTime||e.createdAt||e.timestamp;return t?new Date(t).toLocaleDateString():"N/A"})()}),(0,t.jsx)("td",{children:(0,t.jsx)("button",{onClick:()=>A(e.id),className:"".concat(n.default.actionButton," ").concat(n.default.deleteButton),children:(0,t.jsx)(b,{})})})]},e.id))})]})})]})]})]})}function x(){let[e,d]=(0,a.useState)(!1),[l,s]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=localStorage.getItem("admin-token"),t=localStorage.getItem("admin-token-expiry");e&&t&&(new Date().getTime()<parseInt(t)?d(!0):(localStorage.removeItem("admin-token"),localStorage.removeItem("admin-token-expiry"))),s(!1)},[]),l)?(0,t.jsxs)("div",{className:n.default.loadingContainer,children:[(0,t.jsx)("div",{className:n.default.spinner}),(0,t.jsx)("p",{children:"Loading admin panel..."})]}):a.default.createElement(u,{children:a.default.createElement("div",{className:n.default.adminContainer},e?a.default.createElement(g,{onLogout:()=>d(!1)}):a.default.createElement(r,{onSuccess:()=>d(!0)}))})}}]);